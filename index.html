<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #f4f4f9; }
        .card-box { background: white; padding: 20px; border-radius: 20px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 80%; }
        .grid { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; margin: 15px 0; }
        .card { width: 55px; height: 80px; background: #2c3e50; color: white; display: flex; align-items: center; justify-content: center; border-radius: 8px; cursor: pointer; font-size: 20px; border: 3px solid transparent; }
        .card.selected { background: #3498db; border-color: #2980b9; }
        #send-btn { width: 100%; padding: 12px; background: #ccc; color: white; border: none; border-radius: 10px; font-weight: bold; }
        #send-btn.active { background: #27ae60; cursor: pointer; }
    </style>
</head>
<body>
    <div class="card-box">
        <h3>Выбери 3 карты</h3>
        <div class="grid" id="grid"></div>
        <button id="send-btn" disabled>ПОДТВЕРДИТЬ</button>
    </div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const names = ["Маг", "Жрица", "Императрица", "Император", "Жрец"];
        let sel = [];
        const grid = document.getElementById('grid');
        const btn = document.getElementById('send-btn');

        names.forEach(n => {
            const c = document.createElement('div');
            c.className = 'card'; c.innerText = '?';
            c.onclick = () => {
                if (sel.includes(n)) { sel = sel.filter(i => i !== n); c.classList.remove('selected'); }
                else if (sel.length < 3) { sel.push(n); c.classList.add('selected'); }
                btn.disabled = sel.length !== 3;
                btn.classList.toggle('active', sel.length === 3);
            };
            grid.appendChild(c);
        });

        btn.onclick = () => {
            // Отправляем текст в чат. Это сработает, если бот запущен
            tg.sendData(sel.join(", ")); 
            tg.close();
        };
    </script>
</body>
</html>
